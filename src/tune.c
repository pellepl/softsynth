/*
 * tune.c
 *
 *  Created on: Feb 16, 2012
 *      Author: petera
 */

#include "soft_synth.h"

const short WAVEFORM_SET_NULL[] = {
	WFS_STOP(WFS_SET(0))
};
const short WAVEFORM_NOP[] = {
	WFS_STOP(WFS_NOP)
};
const short WAVEFORM_ENVELOPE1[] = {
	WFS_END(WFS_SET(255)),
	WFS_STOP(WFS_SET(241))
};
const short WAVEFORM_ENVELOPE2[] = {
	WFS_END(WFS_SET(200)),
	WFS_RELATIVE(-10),
	WFS_END(WFS_LOOP(1, 20)),
	WFS_STOP(WFS_SET(0))
};
const short WAVEFORM_ENVELOPE3[] = {
	WFS_END(WFS_SET(255)),
	WFS_RELATIVE(-66),
	WFS_END(WFS_LOOP(1, 3)),
	WFS_RELATIVE(-5),
	WFS_END(WFS_LOOP(1, 4)),
	WFS_STOP(WFS_SET(0))
};
const short WAVEFORM_ENVELOPE4[] = {
	WFS_END(WFS_SET(255)),
	WFS_RELATIVE(-40),
	WFS_END(WFS_LOOP(1, 6)),
	WFS_STOP(WFS_SET(0))
};
const short WAVEFORM_ENVELOPE5[] = {
	WFS_END(WFS_SET(140)),
	WFS_STOP(WFS_SET(100))
};
const short WAVEFORM_ENVELOPE6[] = {
	WFS_END(WFS_SET(210)),
	WFS_END(WFS_SET(190)),
	WFS_END(WFS_SET(170)),
	WFS_STOP(WFS_SET(150))
};
const short WAVEFORM_TREMOLO1[] = {
		WFS_END(WFS_PAUSE(20)),
		WFS_END(WFS_RELATIVE(3)),
		WFS_END(WFS_RELATIVE(1)),
		WFS_END(WFS_RELATIVE(-1)),
		WFS_END(WFS_RELATIVE(-3)),
		WFS_END(WFS_RELATIVE(-3)),
		WFS_END(WFS_RELATIVE(-1)),
		WFS_END(WFS_RELATIVE(1)),
		WFS_RELATIVE(3),
		WFS_LOOP(8,0)
};
const short WAVEFORM_TREMOLO2[] = {
		WFS_END(WFS_NOP),
		WFS_RELATIVE(-9),
		WFS_END(WFS_LOOP(1,14)),
		WFS_STOP(WFS_NOP)
};
const short WAVEFORM_TREMOLO3[] = {
		WFS_END(WFS_RELATIVE(10)),
		WFS_END(WFS_RELATIVE(10)),
		WFS_STOP(WFS_RELATIVE(10)),
};
const short WAVEFORM_CHORD1[] = {
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(3)),
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(4)),
		WFS_END(WFS_NOP),
		WFS_RELATIVE(-7),
		WFS_LOOP(6,0)
};
const short WAVEFORM_CHORD2[] = {
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(5)),
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(4)),
		WFS_END(WFS_NOP),
		WFS_RELATIVE(-9),
		WFS_LOOP(6,0)
};
const short WAVEFORM_CHORD3[] = {
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(4)),
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(3)),
		WFS_END(WFS_NOP),
		WFS_RELATIVE(-7),
		WFS_LOOP(6,0)
};
const short WAVEFORM_CHORD4[] = {
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(5)),
		WFS_END(WFS_NOP),
		WFS_END(WFS_RELATIVE(3)),
		WFS_END(WFS_NOP),
		WFS_RELATIVE(-8),
		WFS_LOOP(6,0)
};
const short WAVEFORM_CHORD5[] = {
		WFS_END(WFS_RELATIVE(12)),
		WFS_END(WFS_NOP),
		WFS_STOP(WFS_RELATIVE(-12))
};
const short WAVEFORM_COMMON_BASS_NOISE[] = {
		WFS_END(WFS_SET(70)),
		WFS_END(WFS_SET(30)),
		WFS_END(WFS_SET(10)),
		WFS_STOP(WFS_SET(0))
};

const short WAVEFORM_COMMON_SNARE_NOISE[] = {
		WFS_END(WFS_SET(100)),
		WFS_RELATIVE(-10),
		WFS_END(WFS_LOOP(-1,4)),
		WFS_RELATIVE(50),
		WFS_END(WFS_LOOP(-1,4)),
		WFS_STOP(WFS_SET(255))
};
const short WAVEFORM_COMMON_SNARE_NOISE_FREQ[] = {
		WFS_END(WFS_SET(4)),
		WFS_RELATIVE(-1),
		WFS_END(WFS_LOOP(1, 4)),
		WFS_STOP(WFS_SET(0))
};
const short WAVEFORM_COMMON_BASSTONE_NOISE[] = {
		WFS_END(WFS_SET(122)),
		WFS_STOP(WFS_SET(0)),
};

const short WAVEFORM_COMMON_BIGLOOP[] = {
		WFS_END(WFS_SET(0)),
		WFS_RELATIVE(31),
		WFS_END(WFS_LOOP(8, 254)),
		WFS_RELATIVE(-31),
		WFS_END(WFS_LOOP(8, 254)),
		WFS_STOP(WFS_SET(0)),
};

const short* ENVELOPES[16] = {
		WAVEFORM_SET_NULL,
		WAVEFORM_ENVELOPE1,
		WAVEFORM_ENVELOPE2,
		WAVEFORM_ENVELOPE3,
		WAVEFORM_ENVELOPE4,
		WAVEFORM_ENVELOPE5,
		WAVEFORM_ENVELOPE6
};
const short* TREMOLOS[16] = {
		WAVEFORM_NOP,
		WAVEFORM_TREMOLO1,
		WAVEFORM_TREMOLO2,
		WAVEFORM_TREMOLO3,
};
const short* CHORDS[16] = {
		WAVEFORM_NOP,
		WAVEFORM_CHORD1,
		WAVEFORM_CHORD2,
		WAVEFORM_CHORD3,
		WAVEFORM_CHORD4,
		WAVEFORM_CHORD5,
};
const short* COMMON[32] = {
		WAVEFORM_NOP,
		WAVEFORM_COMMON_BASS_NOISE,
		WAVEFORM_COMMON_SNARE_NOISE,
		WAVEFORM_COMMON_SNARE_NOISE_FREQ,
		WAVEFORM_COMMON_BASSTONE_NOISE,
		WAVEFORM_COMMON_BIGLOOP,
};


const short TRACK_NOP[] = {
		SEQ_PROPERTY(VOLUME, 0), SEQ_END(128), SEQ_NEXT
};


#define ALB(x) SEQ_SOUND(1,0,0),SEQ_TONE(12*2+x,5),SEQ_END(1)

const short TRACKCHORD[] = {
		SEQ_PROPERTY(HIPASS_FACTOR, 0),
		SEQ_WAVEFORM(HIPASS_FACTOR, 4),
		SEQ_PROPERTY(MODULATION_DELTA,100),
		SEQ_PROPERTY(MODULATION_FACTOR,10),

		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+12,3), SEQ_END(2),
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+7,3), SEQ_END(2),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(4),

		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+10,3), SEQ_END(2),
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+7,3), SEQ_END(2),
		SEQ_SOUND(2,2,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,2,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,2,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,2,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,2,0), SEQ_TONE(12*4+10,2), SEQ_END(4),

		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+10,3), SEQ_END(2),
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+5,3), SEQ_END(2),
		SEQ_SOUND(2,3,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,3,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,3,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,3,0), SEQ_TONE(12*4+10,2), SEQ_END(6),
		SEQ_SOUND(2,3,0), SEQ_TONE(12*4+10,2), SEQ_END(4),

		ALB(12*4+8),ALB(12*4+3),ALB(12*4+0),ALB(12*4+3),
		ALB(12*4+0),ALB(12*3+8),ALB(12*4+0),ALB(12*3+8),
		ALB(12*3+3),ALB(12*3+8),ALB(12*3+3),ALB(12*3+0),
		ALB(12*3+3),ALB(12*3+0),ALB(12*2+8),ALB(12*3+0),

		ALB(12*4+11),ALB(12*4+7),ALB(12*4+2),ALB(12*4+7),
		ALB(12*4+2),ALB(12*3+11),ALB(12*4+2),ALB(12*3+11),
		ALB(12*3+7),ALB(12*3+11),ALB(12*3+7),ALB(12*3+2),
		ALB(12*3+7),ALB(12*3+2),ALB(12*2+11),ALB(12*3+2),
		SEQ_NEXT
};
const short TRACKCHORDCODA[] = {
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+12,3), SEQ_END(2),
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+7,3), SEQ_END(2),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(4),

		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+12,3), SEQ_END(2),
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+7,3), SEQ_END(2),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(4),

		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+12,3), SEQ_END(2),
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+7,3), SEQ_END(2),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(4),

		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+12,3), SEQ_END(2),
		SEQ_SOUND(3,5,0), SEQ_TONE(12*4+7,3), SEQ_END(2),
		SEQ_SOUND(1,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(6),
		SEQ_SOUND(2,1,0), SEQ_TONE(12*4+12,2), SEQ_END(4),
		SEQ_NEXT
};
const short TRACKCHORDFINAL[] = {
		SEQ_PROPERTY(MODULATION_DELTA,0),
		SEQ_PROPERTY(MODULATION_FACTOR,0),
		SEQ_PROPERTY(HIPASS_FACTOR, 42),
		SEQ_SOUND(1,5,0),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),

		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),

		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),

		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(8),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+3,3), SEQ_END(2),
		SEQ_WAVEFORM(NOISE_FACTOR, 1), SEQ_TONE(12*3+0,3), SEQ_END(4),
		SEQ_PROPERTY(HIPASS_FACTOR, 0),
		SEQ_NEXT
};

#define PERC_BASS(len) \
		SEQ_PROPERTY(NOISE_FREQUENCY,4),\
		SEQ_SOUND(0,0,2),\
		SEQ_WAVEFORM(NOISE_FACTOR, 1),\
		SEQ_TONE(12*2+6,3),\
		SEQ_END(len)

#define PERC_SNARE(len) \
		SEQ_SOUND(0,0,3),\
		SEQ_WAVEFORM(NOISE_FACTOR, 2),\
		SEQ_WAVEFORM(NOISE_FREQUENCY, 3),\
		SEQ_TONE(12*2+6,4),\
		SEQ_END(len)

#define BASS(tone) \
		SEQ_WAVEFORM(NOISE_FACTOR, 4),\
		SEQ_SOUND(0,5,0), \
		SEQ_TONE(tone,5), \
		SEQ_END(2)

const short TRACKPERC1[] = {
		PERC_BASS(8),
		PERC_SNARE(4),
		PERC_BASS(8),

		PERC_BASS(4),
		PERC_SNARE(8),

		PERC_BASS(8),
		PERC_SNARE(12),

		PERC_BASS(4),
		PERC_SNARE(8),


		PERC_BASS(8),
		PERC_SNARE(4),
		PERC_BASS(8),

		PERC_BASS(4),
		PERC_SNARE(8),

		PERC_BASS(8),
		PERC_SNARE(12),

		PERC_BASS(4),
		PERC_SNARE(6),
		PERC_SNARE(2),
SEQ_NEXT
};
const short TRACKPERC2[] = {
		PERC_BASS(8),
		PERC_SNARE(4),
		PERC_BASS(8),

		PERC_BASS(4),
		PERC_SNARE(8),

		PERC_BASS(8),
		PERC_SNARE(12),

		PERC_BASS(4),
		PERC_SNARE(8),


		PERC_BASS(8),
		PERC_SNARE(4),
		PERC_BASS(8),

		PERC_BASS(4),
		PERC_SNARE(8),

		PERC_BASS(8),
		PERC_SNARE(12),

		PERC_BASS(4),
		PERC_SNARE(2),
		PERC_SNARE(4),
		PERC_SNARE(2),
SEQ_NEXT
};
const short TRACKPERCFINAL[] = {
		PERC_BASS(4),
		PERC_BASS(4),
		PERC_SNARE(4),
		PERC_BASS(2),
		PERC_BASS(4),

		//+2
		PERC_SNARE(2),
		PERC_BASS(4),
		PERC_SNARE(4),
		PERC_BASS(2),
		PERC_BASS(2),

		PERC_BASS(4),
		PERC_BASS(4),
		PERC_SNARE(4),
		PERC_BASS(2),
		PERC_BASS(4),

		//+2
		PERC_SNARE(2),
		PERC_BASS(4),
		PERC_SNARE(4),
		PERC_SNARE(2),
		PERC_SNARE(2),

		PERC_BASS(4),
		PERC_BASS(4),
		PERC_SNARE(4),
		PERC_BASS(2),
		PERC_BASS(4),

		//+2
		PERC_SNARE(2),
		PERC_BASS(4),
		PERC_SNARE(4),
		PERC_BASS(2),
		PERC_BASS(2),

		PERC_BASS(4),
		PERC_BASS(4),
		PERC_SNARE(4),
		PERC_BASS(2),
		PERC_BASS(4),

		//+2
		PERC_SNARE(2),
		PERC_BASS(4),
		PERC_SNARE(2),
		PERC_SNARE(2),
		PERC_SNARE(2),
		PERC_SNARE(2),

		SEQ_NEXT
};


#define BASS_THEME1(x) BASS(x),BASS(x+12),BASS(x),BASS(x),BASS(x+12),BASS(x),BASS(x),BASS(x)
#define BASS_THEME2(x) BASS(x),BASS(x+12),BASS(x),BASS(x),BASS(x+12),BASS(x),BASS(x),BASS(x+12)

const short TRACKBASS[] = {
		SEQ_PROPERTY(MODULATION_DELTA, 00),
		SEQ_PROPERTY(MODULATION_FACTOR, 00),
//		SEQ_PROPERTY(LOPASS_FACTOR, 130),
//		SEQ_PROPERTY(HIPASS_FACTOR, 200),
		BASS_THEME1(12*2),
		BASS_THEME2(12*2),
		BASS_THEME1(12*2+3),
		BASS_THEME2(12*2+3),
		BASS_THEME1(12*2-2),
		BASS_THEME2(12*2-2),
		BASS_THEME1(12*2-4),
		BASS_THEME2(12*2-5),
		SEQ_NEXT
};
const short TRACKBASSCODA[] = {
		BASS_THEME1(12*2),
		BASS_THEME2(12*2),
		BASS_THEME1(12*2),
		BASS_THEME2(12*2),
		BASS_THEME1(12*2),
		BASS_THEME2(12*2),
		BASS_THEME1(12*2),
		BASS_THEME2(12*2),
		SEQ_NEXT
};

const short TRACKBASSFINAL[] = {
		BASS_THEME1(12*2),
		BASS_THEME1(12*2),
		BASS_THEME1(12*2),
		BASS_THEME1(12*2),
		BASS_THEME1(12*2),
		BASS_THEME1(12*2),
		BASS_THEME1(12*2),
		BASS_THEME1(12*2),
		SEQ_NEXT
};

#define MEL_INIT(trem)	SEQ_PROPERTY(MODULATION_DELTA, 60),\
						SEQ_PROPERTY(MODULATION_FACTOR,160),\
						SEQ_SET_FLAGS(SEQ_FLAG_RESET_FREQ_AT_TONE | SEQ_FLAG_RESET_MOD_AT_TONE),\
						SEQ_PROPERTY(LOPASS_FACTOR,20),\
						SEQ_SOUND(0,0,trem)

const short TRACKMELa1[] = {
		MEL_INIT(1),

		SEQ_TONE(12*4+0,6),SEQ_END(18),
		SEQ_TONE(12*4+2,6),SEQ_END(10),
		SEQ_TONE(12*4+3,6),SEQ_END(4),

		SEQ_TONE(12*4+3,6),SEQ_END(18),
		SEQ_TONE(12*4+5,6),SEQ_END(10),
		SEQ_TONE(12*4+7,6),SEQ_END(4),

		SEQ_TONE(12*4+5,6),SEQ_END(18),
		SEQ_TONE(12*4+3,6),SEQ_END(10),
		SEQ_TONE(12*4+2,6),SEQ_END(4),

		SEQ_TONE(12*4+0,6),SEQ_END(16),
		SEQ_TONE(12*4-1,6),SEQ_END(16),
		SEQ_NEXT
};

const short TRACKMELa2[] = {
		SEQ_TONE(12*4+0,6),SEQ_END(18),
		SEQ_TONE(12*4+2,6),SEQ_END(10),
		SEQ_TONE(12*4+3,6),SEQ_END(4),

		SEQ_TONE(12*4+3,6),SEQ_END(18),
		SEQ_TONE(12*4+5,6),SEQ_END(10),
		SEQ_TONE(12*4+7,6),SEQ_END(4),

		SEQ_TONE(12*4+10,6),SEQ_END(18),
		SEQ_TONE(12*4+7,6),SEQ_END(10),
		SEQ_TONE(12*4+10,6),SEQ_END(4),

		SEQ_TONE(12*4+12,6),SEQ_END(16),
		SEQ_TONE(12*4+11,6),SEQ_END(16),
		SEQ_NEXT
};
const short TRACKMELA1[] = {
		SEQ_TONE(12*5+0,6),SEQ_END(18),
		SEQ_TONE(12*5+2,6),SEQ_END(10),
		SEQ_TONE(12*5+3,6),SEQ_END(4),


		SEQ_TONE(12*5+3,6),SEQ_END(18),
		SEQ_TONE(12*5+5,6),SEQ_END(10),
		SEQ_TONE(12*5+7,6),SEQ_END(4),

		SEQ_TONE(12*5+5,6),SEQ_END(18),
		SEQ_TONE(12*5+3,6),SEQ_END(10),
		SEQ_TONE(12*5+2,6),SEQ_END(4),

		SEQ_TONE(12*5+0,6),SEQ_END(16),
		SEQ_TONE(12*5-1,6),SEQ_END(16),
		SEQ_NEXT
};

const short TRACKMELA2[] = {
		SEQ_TONE(12*5+0,6),SEQ_END(18),
		SEQ_TONE(12*5+2,6),SEQ_END(10),
		SEQ_TONE(12*5+3,6),SEQ_END(4),

		SEQ_TONE(12*5+3,6),SEQ_END(18),
		SEQ_TONE(12*5+5,6),SEQ_END(10),
		SEQ_TONE(12*5+7,6),SEQ_END(4),

		SEQ_TONE(12*5+10,6),SEQ_END(18),
		SEQ_TONE(12*5+7,6),SEQ_END(10),
		SEQ_TONE(12*5+10,6),SEQ_END(4),

		SEQ_TONE(12*5+12,6),SEQ_END(16),
		SEQ_TONE(12*5+11,6),SEQ_END(16),
		SEQ_NEXT
};

const short TRACKMELb1[] = {
		MEL_INIT(1),
		SEQ_SET_FLAGS(0),


		SEQ_TONE(12*5+0,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+2,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+3,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+5,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+7,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+8,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+7,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+5,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),

		SEQ_TONE(12*5+3,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),
		SEQ_TONE(12*5+5,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),
		SEQ_TONE(12*5+7,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),
		SEQ_TONE(12*5+8,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),
		SEQ_TONE(12*5+10,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),
		SEQ_TONE(12*5+3,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),
		SEQ_TONE(12*5+5,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),
		SEQ_TONE(12*5+8,6),SEQ_END(2),
		SEQ_TONE(12*5-2,6),SEQ_END(2),

		SEQ_TONE(12*5+7,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),
		SEQ_TONE(12*5+5,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),
		SEQ_TONE(12*5+3,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),
		SEQ_TONE(12*5+2,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),
		SEQ_TONE(12*5+5,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),
		SEQ_TONE(12*5+7,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),
		SEQ_TONE(12*5+5,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),
		SEQ_TONE(12*5+3,6),SEQ_END(2),
		SEQ_TONE(12*5-7,6),SEQ_END(2),

		SEQ_TONE(12*5+0,6),SEQ_END(2),
		SEQ_TONE(12*5-4,6),SEQ_END(2),
		SEQ_TONE(12*5+2,6),SEQ_END(2),
		SEQ_TONE(12*5-4,6),SEQ_END(2),
		SEQ_TONE(12*5+3,6),SEQ_END(2),
		SEQ_TONE(12*5-4,6),SEQ_END(2),
		SEQ_TONE(12*5+0,6),SEQ_END(2),
		SEQ_TONE(12*5-4,6),SEQ_END(2),
		SEQ_TONE(12*5+2,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+0,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5+2,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),
		SEQ_TONE(12*5-1,6),SEQ_END(2),
		SEQ_TONE(12*5-5,6),SEQ_END(2),

		SEQ_NEXT
};

const short TRACKMELB1[] = {
		SEQ_TONE(12*6+0,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+2,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+3,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+5,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+7,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+8,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+7,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+5,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),

		SEQ_TONE(12*6+3,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),
		SEQ_TONE(12*6+5,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),
		SEQ_TONE(12*6+7,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),
		SEQ_TONE(12*6+8,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),
		SEQ_TONE(12*6+10,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),
		SEQ_TONE(12*6+3,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),
		SEQ_TONE(12*6+5,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),
		SEQ_TONE(12*6+8,6),SEQ_END(2),
		SEQ_TONE(12*6-2,6),SEQ_END(2),

		SEQ_TONE(12*6+7,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),
		SEQ_TONE(12*6+5,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),
		SEQ_TONE(12*6+3,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),
		SEQ_TONE(12*6+2,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),
		SEQ_TONE(12*6+5,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),
		SEQ_TONE(12*6+7,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),
		SEQ_TONE(12*6+5,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),
		SEQ_TONE(12*6+3,6),SEQ_END(2),
		SEQ_TONE(12*6-7,6),SEQ_END(2),

		SEQ_TONE(12*6+0,6),SEQ_END(2),
		SEQ_TONE(12*6-4,6),SEQ_END(2),
		SEQ_TONE(12*6+2,6),SEQ_END(2),
		SEQ_TONE(12*6-4,6),SEQ_END(2),
		SEQ_TONE(12*6+3,6),SEQ_END(2),
		SEQ_TONE(12*6-4,6),SEQ_END(2),
		SEQ_TONE(12*6+0,6),SEQ_END(2),
		SEQ_TONE(12*6-4,6),SEQ_END(2),
		SEQ_TONE(12*6+2,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+0,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6+2,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),
		SEQ_TONE(12*6-1,6),SEQ_END(2),
		SEQ_TONE(12*6-5,6),SEQ_END(2),

		SEQ_NEXT
};

const short TRACKMELCODA[] = {
		MEL_INIT(1),
		SEQ_SOUND(0,0,1),

		SEQ_PROPERTY(MODULATION_DELTA, 120),
		SEQ_PROPERTY(MODULATION_FACTOR,220),
		SEQ_TONE(12*6+0,6),SEQ_END(32),
		SEQ_PROPERTY(MODULATION_DELTA, 120),
		SEQ_PROPERTY(MODULATION_FACTOR,230),
		SEQ_TONE(12*5+0,6),SEQ_END(32),
		SEQ_PROPERTY(MODULATION_DELTA, 120),
		SEQ_PROPERTY(MODULATION_FACTOR,240),
		SEQ_TONE(12*4+0,6),SEQ_END(32),
		SEQ_PROPERTY(MODULATION_DELTA, 120),
		SEQ_PROPERTY(MODULATION_FACTOR,250),
		SEQ_TONE(12*3+0,6),SEQ_END(32),
		SEQ_NEXT
};

const short TRACKMELFINAL[] = {
		SEQ_PROPERTY(LOPASS_FACTOR,0),
		SEQ_SOUND(3,0,0),
		SEQ_PROPERTY(MODULATION_DELTA, 120),
		SEQ_PROPERTY(MODULATION_FACTOR,250),
		SEQ_TONE(12*2+0,6),SEQ_END(128),
		SEQ_NEXT
};


const short* TRACKS_CHAN0[] = {TRACK_NOP, TRACKPERC1, TRACKPERC2,TRACKPERCFINAL};
const short TRACKMAP_CHAN0[] = {1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,3};
const short* TRACKS_CHAN1[] = {TRACK_NOP, TRACKBASS, TRACKBASSCODA, TRACKBASSFINAL};
const short TRACKMAP_CHAN1[] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,3};
const short* TRACKS_CHAN2[] = {TRACK_NOP, TRACKCHORD, TRACKCHORDCODA, TRACKCHORDFINAL};
const short TRACKMAP_CHAN2[] = {0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,3};
const short* TRACKS_CHAN3[] = {TRACK_NOP, TRACKMELa1, TRACKMELa2, TRACKMELA1, TRACKMELA2, TRACKMELb1, TRACKMELB1, TRACKMELCODA, TRACKMELFINAL};
const short TRACKMAP_CHAN3[] = {0,0,0,0,1,2,3,4,0,0,5,6,5,6,7,8};

void tune_init(struct SYNTH_Device_t *pDev) {
	synth_sequencer_init(pDev, (short**)ENVELOPES, (short**)TREMOLOS, (short**)CHORDS, (short**)COMMON);
	synth_channel_sequencer_init(pDev, 0, 16, (short*)TRACKMAP_CHAN0, (short**)TRACKS_CHAN0);
	synth_channel_sequencer_init(pDev, 1, 16, (short*)TRACKMAP_CHAN1, (short**)TRACKS_CHAN1);
	synth_channel_sequencer_init(pDev, 2, 16, (short*)TRACKMAP_CHAN2, (short**)TRACKS_CHAN2);
	synth_channel_sequencer_init(pDev, 3, 16, (short*)TRACKMAP_CHAN3, (short**)TRACKS_CHAN3);
}
